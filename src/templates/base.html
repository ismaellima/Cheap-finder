<!DOCTYPE html>
<html lang="en" class="dark">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>{% block title %}Cheap Finder{% endblock %}</title>
  <link rel="icon" type="image/svg+xml" href="/static/favicon.svg">

  <!-- Tailwind CSS via CDN -->
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
      darkMode: 'class',
      theme: {
        extend: {
          colors: {
            neutral: {
              950: '#0a0a0a',
              900: '#141414',
              800: '#262626',
            }
          }
        }
      }
    }
  </script>

  <!-- Inter font -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">

  <!-- HTMX -->
  <script src="https://unpkg.com/htmx.org@2.0.4"></script>

  <!-- Chart.js -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.7/dist/chart.umd.min.js"></script>

  <style>
    * { font-family: 'Inter', system-ui, -apple-system, sans-serif; }
    .line-clamp-2 { display: -webkit-box; -webkit-line-clamp: 2; -webkit-box-orient: vertical; overflow: hidden; }

    /* Light mode overrides */
    html:not(.dark) { background: #fafafa; }
    html:not(.dark) .light\:bg-white { background: #fff; }
    html:not(.dark) .light\:bg-neutral-100 { background: #f5f5f5; }
    html:not(.dark) .light\:border-neutral-200 { border-color: #e5e5e5; }
    html:not(.dark) .light\:border-neutral-400 { border-color: #a3a3a3; }
    html:not(.dark) .light\:text-neutral-900 { color: #0a0a0a; }
    html:not(.dark) .light\:text-neutral-800 { color: #262626; }
    html:not(.dark) .light\:text-neutral-400 { color: #a3a3a3; }
    html:not(.dark) .light\:text-neutral-600 { color: #525252; }
  </style>
</head>
<body class="bg-neutral-950 dark:bg-neutral-950 text-neutral-100 dark:text-neutral-100 min-h-screen">
  {% include "components/nav.html" %}

  <main class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
    {% block content %}{% endblock %}
  </main>

  <script>
    // Theme management
    function getTheme() {
      return localStorage.getItem('theme') || 'dark';
    }

    function setTheme(theme) {
      localStorage.setItem('theme', theme);
      if (theme === 'dark') {
        document.documentElement.classList.add('dark');
        document.body.classList.add('bg-neutral-950', 'text-neutral-100');
        document.body.classList.remove('bg-neutral-50', 'text-neutral-900');
      } else {
        document.documentElement.classList.remove('dark');
        document.body.classList.remove('bg-neutral-950', 'text-neutral-100');
        document.body.classList.add('bg-neutral-50', 'text-neutral-900');
      }
      updateThemeIcon(theme);
    }

    function toggleTheme() {
      setTheme(getTheme() === 'dark' ? 'light' : 'dark');
    }

    function updateThemeIcon(theme) {
      const darkIcon = document.getElementById('theme-icon-dark');
      const lightIcon = document.getElementById('theme-icon-light');
      if (theme === 'dark') {
        darkIcon.classList.remove('hidden');
        lightIcon.classList.add('hidden');
      } else {
        darkIcon.classList.add('hidden');
        lightIcon.classList.remove('hidden');
      }
    }

    // Init theme
    setTheme(getTheme());
  </script>
</body>
</html>
