{% if total_pages > 1 %}
<nav class="flex items-center justify-center gap-1.5 mt-8">
  {% if page > 1 %}
  <a href="?page={{ page - 1 }}&q={{ current_q | urlencode }}&gender={{ current_gender }}&sort={{ current_sort }}&per_page={{ per_page }}"
     class="px-3 py-2 text-xs rounded-lg bg-neutral-800 dark:bg-neutral-800 light:bg-neutral-100 text-neutral-300 dark:text-neutral-300 light:text-neutral-700 hover:bg-neutral-700 dark:hover:bg-neutral-700 light:hover:bg-neutral-200 transition-colors">
    Prev
  </a>
  {% endif %}

  {% for p in range(1, total_pages + 1) %}
    {% if p == page %}
    <span class="px-3 py-2 text-xs rounded-lg bg-green-600 text-white font-medium">{{ p }}</span>
    {% elif p <= 2 or p > total_pages - 1 or (p >= page - 1 and p <= page + 1) %}
    <a href="?page={{ p }}&q={{ current_q | urlencode }}&gender={{ current_gender }}&sort={{ current_sort }}&per_page={{ per_page }}"
       class="px-3 py-2 text-xs rounded-lg bg-neutral-800 dark:bg-neutral-800 light:bg-neutral-100 text-neutral-300 dark:text-neutral-300 light:text-neutral-700 hover:bg-neutral-700 dark:hover:bg-neutral-700 light:hover:bg-neutral-200 transition-colors">
      {{ p }}
    </a>
    {% elif p == 3 and page > 4 %}
    <span class="px-1 text-neutral-500 text-xs">...</span>
    {% elif p == total_pages - 1 and page < total_pages - 3 %}
    <span class="px-1 text-neutral-500 text-xs">...</span>
    {% endif %}
  {% endfor %}

  {% if page < total_pages %}
  <a href="?page={{ page + 1 }}&q={{ current_q | urlencode }}&gender={{ current_gender }}&sort={{ current_sort }}&per_page={{ per_page }}"
     class="px-3 py-2 text-xs rounded-lg bg-neutral-800 dark:bg-neutral-800 light:bg-neutral-100 text-neutral-300 dark:text-neutral-300 light:text-neutral-700 hover:bg-neutral-700 dark:hover:bg-neutral-700 light:hover:bg-neutral-200 transition-colors">
    Next
  </a>
  {% endif %}
</nav>
{% endif %}
